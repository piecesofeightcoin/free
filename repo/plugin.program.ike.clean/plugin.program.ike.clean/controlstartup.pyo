Û
Ë*Yc           @   sÃ  d  d l  Z  d  d l Z d  d l Z d  d l Z d  d l Z d  d l Z d  d l Z d  d l Z d  d l Z d  d l	 Z	 d  d l
 Z
 d  d l Z d  d l Z e  j d É Z e j j e  j d É d É Z e  j d É Z e j j e j j e  j d É d É d É Z e j j e d É Z e  j d	 É Z e  j e j j d
 d É É Z d Z e  j e j j d e d É É Z e  j e j j d e d É É Z d d d Ñ  É  YZ d Ñ  Z d Ñ  Z d Ñ  Z d Ñ  Z d S(   iˇˇˇˇNs   special://thumbnailss   special://homet   caches   special://tempt   addonss$   plugin.program.ike.cleant   medias   special://databases"   special://home/userdata/Thumbnailst    s   special://home/addons/s
   fanart.jpgs   icon.pngt
   cacheEntryc           B   s   e  Z d  Ñ  Z RS(   c         C   s   | |  _  | |  _ d  S(   N(   t   namet   path(   t   selft   nameit   pathi(    (    sM   /home/ike/.kodi/addons/plugin.program.ike.clean/controlstartup.pyt   __init__'   s    	(   t   __name__t
   __module__R
   (    (    (    sM   /home/ike/.kodi/addons/plugin.program.ike.clean/controlstartup.pyR   &   s   c          C   so   d }  d d d d d g } d d d	 d
 d g } g  } x2 t  |  É D]$ } | j t | | | | É É qC W| S(   Ni   t   WTFt   4oDs   BBC iPlayers   Simple Downloadert   ITVs;   special://profile/addon_data/plugin.video.whatthefurk/caches3   special://profile/addon_data/plugin.video.4od/cachesD   special://profile/addon_data/plugin.video.iplayer/iplayer_http_caches<   special://profile/addon_data/script.module.simple.downloaders4   special://profile/addon_data/plugin.video.itv/Images(   t   ranget   appendR   (   t   entriest
   dialogNamet   pathNamet   cacheEntriest   x(    (    sM   /home/ike/.kodi/addons/plugin.program.ike.clean/controlstartup.pyt   setupCacheEntries+   s    	"c          C   sx  t  j j t É t k r˜ x‹ t  j t É D]» \ }  } } d } | t | É 7} | d k r( xV | D]N } y> | d k sÅ | d k rá w` n  t  j t  j j |  | É É Wq` q` Xq` Wx; | D]0 } y  t	 j
 t  j j |  | É É Wqπ qπ Xqπ Wq( q( Wn  t  j j t É t k rÓx‹ t  j t É D]» \ }  } } d } | t | É 7} | d k rxV | D]N } y> | d k sx| d k r~wWn  t  j t  j j |  | É É WqWqWXqWWx; | D]0 } y  t	 j
 t  j j |  | É É Wq∞q∞Xq∞WqqWn  t j d É rnt  j j d d É } xü t  j | É D]é \ }  } } d } | t | É 7} | d k r"x* | D]" } t  j t  j j |  | É É qZWx- | D]" } t	 j
 t  j j |  | É É qáWq"q"Wt  j j d d É } x¢ t  j | É D]é \ }  } } d } | t | É 7} | d k rŸx* | D]" } t  j t  j j |  | É É qWx- | D]" } t	 j
 t  j j |  | É É q>WqŸqŸWn  t É  } x› | D]’ }	 t j |	 j É }
 t  j j |
 É t k r~x¢ t  j |
 É D]é \ }  } } d } | t | É 7} | d k ræx* | D]" } t  j t  j j |  | É É qˆWx- | D]" } t	 j
 t  j j |  | É É q#WqæqæWq~q~Wt j d d	 d
 d t f É d  S(   Ni    s   xbmc.logs   xbmc.old.logs   system.platform.ATV2s1   /private/var/mobile/Library/Caches/AppleTV/Video/t   Othert   LocalAndRentals!   XBMC.Notification(%s, %s, %s, %s)t   Maintenances   Auto Clean Completedt   3000(   t   osR   t   existst	   cachePatht   Truet   walkt   lent   unlinkt   joint   shutilt   rmtreet   tempPatht   xbmct   getCondVisibilityR   t   translatePatht   executebuiltint   iconpath(   t   roott   dirst   filest
   file_countt   ft   dt   atv2_cache_at   atv2_cache_bR   t   entryt   clear_cache_path(    (    sM   /home/ike/.kodi/addons/plugin.program.ike.clean/controlstartup.pyt
   clearCache:   sé           # #	 #c          C   sÀ  t  j j t É t k r¬ t j É  }  |  j d d d É r¬ xÉ t  j t É D]o \ } } } d } | t	 | É 7} | d k rI x; | D]0 } y  t  j
 t  j j | | É É WqÅ qÅ XqÅ WqI qI Wq¬ n  t  j j t É ráy¶ xü t  j t É D]é \ } } } d } | t	 | É 7} | d k rÁ x* | D]" } t  j
 t  j j | | É É qWx- | D]" } t j t  j j | | É É qLWqÁ qÁ WWqáqáXn  y& t  j j t d É } t  j
 | É Wn n X|  j d d É d  S(   Ns   Delete Thumbnailss"   This option deletes all thumbnailss!   Are you sure you want to do this?i    s   Textures13.dbs   Restart Kodis0   Please restart Kodi to rebuild thumbnail library(   R   R   R   t   thumbnailPathR   t   xbmcguit   Dialogt   yesnoR    R!   R"   R#   t   THUMBSR$   R%   t   databasePatht   ok(   t   dialogR,   R-   R.   R/   R0   R1   t   text13(    (    sM   /home/ike/.kodi/addons/plugin.program.ike.clean/controlstartup.pyt   deleteThumbnailsù   s<        +c          C   sN  t  j d É }  t j É  } x6 t j |  É D]% \ } } } d } | t | É 7} q+ W| j d d | d É rJx⁄ t j |  É D]∆ \ } } } d } | t | É 7} | d k r'x* | D]" } t j t j	 j
 | | É É qµ Wx* | D]" } t j t j	 j
 | | É É q‚ Wt j É  } | j d d É q} t j É  } | j d d É q} Wn  d  S(	   Ns   special://home/addons/packagesi    s   Delete Package Cache Filess   %d packages found.s   Delete Them?R   s   Deleting Packages all dones   No Packages to Purge(   R'   R)   R8   R9   R   R    R!   R:   R"   R   R#   R$   R%   R=   (   t	   purgePathR>   R,   R-   R.   R/   R0   R1   (    (    sM   /home/ike/.kodi/addons/plugin.program.ike.clean/controlstartup.pyt   purgePackages¿   s$      (    (   R'   t	   xbmcaddonR8   t
   xbmcpluginR   t   syst   xbmcvfst   globR$   t   urllib2t   urllibt   reR)   R7   R   R#   R   R&   t	   addonPatht	   mediaPathR<   R;   t   addon_idt   fanartR+   R   R   R6   R@   RB   (    (    (    sM   /home/ike/.kodi/addons/plugin.program.ike.clean/controlstartup.pyt   <module>   s&   `-""		c	#